(()=>{"use strict";class e{static saveMainSession(e){chrome.storage.local.get(["mainSessions"],(s=>{let t=s.mainSessions||[];t.push(e),chrome.storage.local.set({mainSessions:t},(()=>{console.log("MainSession saved:",e)}))}))}static updateMainSession(e){chrome.storage.local.get(["mainSessions"],(s=>{let t=s.mainSessions||[];t.length>0?(t[t.length-1]=e,chrome.storage.local.set({mainSessions:t},(()=>{console.log("MainSession updated:",e)}))):console.error("No MainSessions available to update.")}))}static getMainSessions(e){chrome.storage.local.get(["mainSessions"],(s=>{s.mainSessions||console.error("No MainSessions found."),e(s.mainSessions||[])}))}static getLastMainSession(){return new Promise(((e,s)=>{chrome.storage.local.get(["mainSessions"],(s=>{let t=s.mainSessions||[];t.length>0?e(t[t.length-1]):(console.error("No MainSessions found."),e(null))}))}))}static clearMainSessions(){chrome.storage.local.set({mainSessions:[]},(()=>{console.log("All MainSessions cleared.")}))}}function s(e){!function(e){let s=0;e.forEach((e=>{e.tabSessions.forEach((e=>{e.startTimestamp&&e.endTimestamp&&(s+=e.endTimestamp-e.startTimestamp)}))})),document.getElementById("total-time").textContent=(s/1e3).toFixed(2)+" sec"}(e),function(e){var s,t;let n=0,o=0;if(e.forEach((e=>{e.tabSessions.forEach((e=>{e.startTimestamp&&e.endTimestamp&&(o+=e.endTimestamp-e.startTimestamp)}))})),e.length>0){const o=null===(s=e[0].tabSessions[0])||void 0===s?void 0:s.startTimestamp,i=null===(t=e[e.length-1].tabSessions[0])||void 0===t?void 0:t.endTimestamp;o&&i&&(n=(i-o)/864e5)}const i=o/n;document.getElementById("daily-average-time").textContent=(i/1e3).toFixed(2)+" sec/day"}(e),function(e){let s={};e.forEach((e=>{e.tabSessions.forEach((e=>{const t=e.endTimestamp&&e.startTimestamp?e.endTimestamp-e.startTimestamp:0;s[e.domain]=(s[e.domain]||0)+t}))}));const t=Object.entries(s).sort(((e,s)=>s[1]-e[1])).slice(0,5),n=document.getElementById("most-visited-sites-list");n.innerHTML="",t.forEach((e=>{let s=document.createElement("li");s.textContent=`${e[0]}: ${(e[1]/1e3).toFixed(2)} sec`,n.appendChild(s)}))}(e)}document.addEventListener("DOMContentLoaded",(()=>{e.getMainSessions(s)}))})();