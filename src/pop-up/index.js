(()=>{"use strict";class e{static saveMainSession(e){chrome.storage.local.get(["mainSessions"],(s=>{let t=s.mainSessions||[];t.push(e),chrome.storage.local.set({mainSessions:t},(()=>{console.log("MainSession saved:",e)}))}))}static updateMainSession(e){chrome.storage.local.get(["mainSessions"],(s=>{let t=s.mainSessions||[];t.length>0?(t[t.length-1]=e,chrome.storage.local.set({mainSessions:t},(()=>{console.log("MainSession updated:",e)}))):console.error("No MainSessions available to update.")}))}static getMainSessions(e){chrome.storage.local.get(["mainSessions"],(s=>{s.mainSessions||console.error("No MainSessions found."),e(s.mainSessions||[])}))}static getLastMainSession(){return new Promise(((e,s)=>{chrome.storage.local.get(["mainSessions"],(s=>{let t=s.mainSessions||[];t.length>0?e(t[t.length-1]):(console.error("No MainSessions found."),e(null))}))}))}static clearMainSessions(){chrome.storage.local.set({mainSessions:[]},(()=>{console.log("All MainSessions cleared.")}))}}function s(e){let s=0,t={};e.forEach((e=>{e.tabSessions.forEach((e=>{const n=function(e){return e.startTimestamp&&e.endTimestamp?Math.floor((e.endTimestamp-e.startTimestamp)/1e3):0}(e);s+=n,t[e.domain]=(t[e.domain]||0)+n}))})),document.getElementById("total-time-spent").textContent=s+" sec";const n=document.getElementById("time-per-site-list");for(let e in t){let s=document.createElement("li");s.textContent=`${e}: ${t[e]} sec`,n.appendChild(s)}}document.addEventListener("DOMContentLoaded",(()=>{var t;e.getMainSessions(s),null===(t=document.getElementById("viewStatistics"))||void 0===t||t.addEventListener("click",(()=>{chrome.tabs.create({url:chrome.runtime.getURL("src/dashboard/index.html")})}))}))})();