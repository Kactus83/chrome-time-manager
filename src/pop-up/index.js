(()=>{"use strict";class e{static saveMainSession(e){chrome.storage.local.get(["mainSessions"],(s=>{let n=s.mainSessions||[];n.push(e),chrome.storage.local.set({mainSessions:n},(()=>{console.log("MainSession saved:",e)}))}))}static updateMainSession(e){chrome.storage.local.get(["mainSessions"],(s=>{let n=s.mainSessions||[];n.length>0?(n[n.length-1]=e,chrome.storage.local.set({mainSessions:n},(()=>{console.log("MainSession updated:",e)}))):console.error("No MainSessions available to update.")}))}static getMainSessions(e){chrome.storage.local.get(["mainSessions"],(s=>{s.mainSessions||console.error("No MainSessions found."),e(s.mainSessions||[])}))}static getLastMainSession(){return new Promise(((e,s)=>{chrome.storage.local.get(["mainSessions"],(s=>{let n=s.mainSessions||[];n.length>0?e(n[n.length-1]):(console.error("No MainSessions found."),e(null))}))}))}static clearMainSessions(){chrome.storage.local.set({mainSessions:[]},(()=>{console.log("All MainSessions cleared.")}))}}function s(e){let s=0,n={};e.forEach((e=>{e.tabSessions.forEach((e=>{const o=function(e){return e.startTimestamp&&e.endTimestamp?Math.floor((e.endTimestamp-e.startTimestamp)/1e3):0}(e);s+=o,n[e.domain]=(n[e.domain]||0)+o}))})),document.getElementById("total-time-spent").textContent=s+" sec";const o=document.getElementById("time-per-site-list");for(let e in n){let s=document.createElement("li");s.textContent=`${e}: ${n[e]} sec`,o.appendChild(s)}}document.addEventListener("DOMContentLoaded",(()=>{e.getMainSessions(s)}))})();